### NIO


#### 序列化
1. 什么是序列化与反序列化？

序列化：指把堆内存中的 Java 对象数据，通过某种方式把对象存储到磁盘文件中或者传递给其他网络节点（在网络上传输）。这个过程称为序列化。通俗来说就是将数据结构或对象转换成二进制串的过程
反序列化：把磁盘文件中的对象数据或者把网络节点上的对象数据，恢复成Java对象模型的过程。也就是将在序列化过程中所生成的二进制串转换成数据结构或者对象的过程

2. 为什么要做序列化？

- 在分布式系统中，此时需要把对象在网络上传输，就得把对象数据转换为二进制形式，需要共享的数据的 JavaBean 对象，都得做序列化。
- 服务器钝化：如果服务器发现某些对象好久没活动了，那么服务器就会把这些内存中的对象持久化在本地磁盘文件中（Java对象转换为二进制文件）；如果服务器发现某些对象需要活动时，先去内存中寻找，找不到再去磁盘文件中反序列化我们的对象数据，恢复成 Java 对象。这样能节省服务器内存。

> 问题1:ObjectInputStream.readObject()  throw java.io.StreamCorruptedException: invalid type code: AC

1. **描述**：ObjectInputStream.readObject()第一次获取的时候不抛异常，第二次获取的时候抛异常。
2. **原因**：ObjectOutputStream.writeObject(obj)的时候，如果是new的，会给数据流加上header，导致读取的时候报错
3. **解决**: 判断文件是否为空，如果是空的时候加入header,不为空的时候不要加入header